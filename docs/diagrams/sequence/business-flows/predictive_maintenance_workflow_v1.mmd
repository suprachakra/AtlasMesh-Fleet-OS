---
title: Predictive Maintenance Workflow - AtlasMesh Fleet OS
---
sequenceDiagram
    participant VA as Vehicle Agent
    participant TI as Telemetry Ingestion
    participant PM as Predictive Maintenance
    participant FS as Feature Store
    participant ML as ML Pipeline
    participant WO as Work Order System
    participant FM as Fleet Manager
    participant AL as Audit Log
    
    Note over VA,AL: Predictive Maintenance Flow
    
    %% Continuous Data Collection
    loop Continuous Monitoring
        VA->>+TI: SendDiagnosticData(vehicleId, sensorReadings, diagnosticCodes)
        TI->>TI: Validate and enrich data
        TI->>+FS: ExtractFeatures(diagnosticData)
        FS->>FS: Compute maintenance features
        FS->>-TI: MaintenanceFeatures(features, confidence)
        TI->>-VA: DataIngested()
    end
    
    %% ML Model Inference
    FS->>+ML: TriggerInference(vehicleId, features)
    ML->>ML: Load RUL (Remaining Useful Life) model
    ML->>ML: Predict component health
    ML->>+PM: RULPrediction(vehicleId, componentHealth, confidence)
    PM->>PM: Analyze predictions against thresholds
    PM->>AL: Log RUL prediction
    
    alt Maintenance Required
        PM->>PM: Generate maintenance recommendation
        PM->>+WO: CreateWorkOrder(vehicleId, componentId, priority, estimatedRUL)
        WO->>WO: Schedule maintenance based on fleet availability
        WO->>-PM: WorkOrderCreated(workOrderId, scheduledDate)
        
        PM->>+FM: NotifyMaintenanceRequired(vehicleId, workOrderId, urgency)
        FM->>FM: Update vehicle maintenance status
        FM->>AL: Log maintenance notification
        FM->>-PM: MaintenanceScheduled()
        
        %% Proactive Fleet Management
        alt Critical Maintenance (RUL < 24 hours)
            PM->>+FM: RequestVehicleGrounding(vehicleId, reason=CRITICAL_MAINTENANCE)
            FM->>+VA: GroundVehicle(vehicleId, reason)
            VA->>VA: Enter maintenance mode
            VA->>AL: Log vehicle grounding
            VA->>-FM: VehicleGrounded()
            FM->>-PM: VehicleGroundingConfirmed()
        else Scheduled Maintenance (RUL > 24 hours)
            PM->>+FM: ScheduleMaintenanceWindow(vehicleId, preferredTime)
            FM->>FM: Optimize maintenance scheduling
            FM->>-PM: MaintenanceWindowScheduled(scheduledTime)
        end
        
    else No Maintenance Required
        PM->>AL: Log healthy component status
        ML->>-PM: PredictionComplete()
    end
    
    %% Model Performance Monitoring
    PM->>+FS: UpdateModelPerformance(predictions, actualOutcomes)
    FS->>FS: Track model drift and accuracy
    FS->>+ML: TriggerRetraining(modelId, performanceMetrics)
    ML->>ML: Retrain model if drift detected
    ML->>-FS: ModelUpdated(newModelVersion)
    FS->>-PM: PerformanceUpdated()
